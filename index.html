<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ecological Registry — Gardener & Son</title>

  <meta name="description" content="Collectively, gardens form one of the largest untapped ecological assets in our cities. Ecological Registry provides the structure that allows private gardens to become measurable, trusted contributors to urban biodiversity." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['"Abril Fatface"', "serif"],
            sans: ['"IBM Plex Sans"', "sans-serif"],
          },
          colors: {
            "gardener-green": "#3d4535",
            "nostalgic-beige": "#fff0dc",
          },
        },
      },
    };
  </script>

  <style>
    * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    body { font-family: "IBM Plex Sans", sans-serif; }
    h1, h2, h3, .font-serif { font-family: "Abril Fatface", serif; font-weight: 400; }

    /* Theme tokens */
    :root{
      --bg: #fff0dc;
      --fg: #3d4535;
      --muted: rgba(61,69,53,.72);
      --hair: rgba(61,69,53,.10);
      --wash: rgba(61,69,53,.05);

      /* fixed nav height token */
      --navh: 80px;
    }
    html.dark{
      --bg: #3d4535;
      --fg: #fff0dc;
      --muted: rgba(255,240,220,.78);
      --hair: rgba(255,240,220,.10);
      --wash: rgba(255,240,220,.06);
    }

    body{ background: var(--bg); color: var(--fg); }
    .muted{ color: var(--muted); }
    .wash{ background: var(--wash); }

    /* Alternating section backgrounds for visual rhythm */
    .screen:nth-child(even) {
      background: var(--wash);
    }

    /* Enhanced borders for better visibility in both modes */
    .border-subtle {
      border-color: rgba(61, 69, 53, 0.12);
    }
    html.dark .border-subtle {
      border-color: rgba(255, 240, 220, 0.18);
    }

    .border-subtle-strong {
      border-color: rgba(61, 69, 53, 0.15);
    }
    html.dark .border-subtle-strong {
      border-color: rgba(255, 240, 220, 0.25);
    }

    .bg-subtle {
      background: rgba(61, 69, 53, 0.05);
    }
    html.dark .bg-subtle {
      background: rgba(255, 240, 220, 0.08);
    }

    /* Button borders */
    .btn-border {
      border: 1px solid rgba(61, 69, 53, 0.25);
    }
    html.dark .btn-border {
      border: 1px solid rgba(255, 240, 220, 0.35);
    }

    /* Button hover states */
    .btn-border:hover {
      background: var(--fg);
      color: var(--bg);
      border-color: var(--fg);
    }

    /* Nav border */
    .nav-border {
      border-bottom: 1px solid rgba(61, 69, 53, 0.10);
    }
    html.dark .nav-border {
      border-bottom: 1px solid rgba(255, 240, 220, 0.15);
    }

    /* Divider lines */
    .divider-line {
      border-top: 1px solid rgba(61, 69, 53, 0.10);
    }
    html.dark .divider-line {
      border-top: 1px solid rgba(255, 240, 220, 0.15);
    }

    /* Left accent borders for lists */
    .border-l-accent {
      border-left: 2px solid rgba(61, 69, 53, 0.20);
    }
    html.dark .border-l-accent {
      border-left: 2px solid rgba(255, 240, 220, 0.30);
    }

    /* Active nav link indicator */
    nav a.nav-link {
      position: relative;
      display: inline-block;
      padding-bottom: 4px;
    }
    nav a.nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--fg);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }
    nav a.nav-link.active::after {
      transform: scaleX(1);
    }

    /* Gardener & Son badge - bottom right corner */
    .gs-badge {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 50;
      background: var(--bg);
      border: 1px solid rgba(61, 69, 53, 0.15);
      border-radius: 2px;
      padding: 8px 12px;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0.6;
      transition: all 0.2s ease;
      color: var(--fg);
      text-decoration: none;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    .gs-badge:hover {
      opacity: 1;
      border-color: rgba(61, 69, 53, 0.25);
    }
    html.dark .gs-badge {
      border-color: rgba(255, 240, 220, 0.15);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    html.dark .gs-badge:hover {
      border-color: rgba(255, 240, 220, 0.35);
    }
    @media (max-width: 768px) {
      .gs-badge {
        bottom: 16px;
        right: 16px;
        font-size: 9px;
        padding: 6px 10px;
      }
    }

    :focus-visible { outline: 2px solid rgba(61, 69, 53, 0.55); outline-offset: 3px; }
    html.dark :focus-visible { outline: 2px solid rgba(255, 240, 220, 0.55); }

    /* FULL-SCREEN + SNAP (Yield-like), WITH FIXED NAV */
    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }

    main {
      scroll-snap-type: y proximity;
      scroll-padding-top: var(--navh); /* Offset snap position by nav height */
    }

    .screen{
      min-height: 100svh;
      scroll-snap-align: start;

      /* Yield-style centering: flexbox with balanced padding */
      display: flex;
      align-items: center;
      justify-content: center;

      /* Ensure top padding clears the fixed nav for all sections */
      padding-top: calc(var(--navh) + 20px);
      padding-bottom: var(--navh);
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }

    /* Content wrapper - no scroll, no max-height */
    .screen > div {
      width: 100%;
    }

    /* Non-hero sections: push content up more aggressively while still clearing nav */
    .screen:not(#top) {
      padding-top: calc(var(--navh) + 10px);
      padding-bottom: 220px;
    }

    /* mobile: nav becomes taller because it stacks */
    @media (max-width: 768px){
      :root{ --navh: 120px; }
      .screen{
        padding-top: calc(var(--navh) + 20px);
        padding-bottom: var(--navh);
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .screen:not(#top) {
        padding-top: calc(var(--navh) + 20px);
        padding-bottom: 260px;
      }
      /* Tighter line-height for hero on mobile */
      .hero-title {
        line-height: 0.92;
      }
      /* Reduce heading sizes on mobile to fit better */
      h1 { font-size: 2.5rem; }
      h2 { font-size: 2rem; }
    }

    /* Fixed nav stays on top always */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      will-change: transform; /* Performance hint */
    }

    /* reduce motion accessibility */
    @media (prefers-reduced-motion: reduce){
      html { scroll-behavior: auto !important; }
      main { scroll-snap-type: none; }
    }

    /* Subtle hover enhancement for cards */
    .card-hover {
      transition: all 0.2s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(61, 69, 53, 0.08);
    }
    html.dark .card-hover:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>

<body>
  <!-- Skip link -->
  <a href="#content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 px-4 py-2 text-sm z-[200]"
     style="background:var(--bg); border:1px solid var(--hair);">
    Skip to content
  </a>

  <!-- Gardener & Son Badge -->
  <a href="https://www.gardenerandson.com" class="gs-badge" target="_blank" rel="noopener noreferrer">
    Gardener & Son
  </a>

  <!-- CONFIG (edit these) -->
  <script>
    window.REGSITE = {
      registerUrl: "https://registeredecologicalgardens.org/register",
      exampleUrl:  "https://tinyforests.github.io/Ecological-Registry/reg/REG-VIC-SH-001.html",
      contactEmail:"hello@gardenerandson.com.au",
      yieldUrl:    "https://yield.gardenerandson.com",
      studioUrl:   "https://www.gardenerandson.com",

      // Signals can be updated here
      signals: [
        {
          title: "Structure",
          description: "Canopy / midstorey / groundlayer presence and continuity."
        },
        {
          title: "Habitat features",
          description: "Logs, rocks, litter, water, nesting opportunities, refuge."
        },
        {
          title: "Soil cover",
          description: "Mulch, leaf litter, living groundcover, permeability, compacted zones."
        },
        {
          title: "Water logic",
          description: "Runoff, infiltration, passive irrigation patterns, retention points."
        },
        {
          title: "Planting intent",
          description: "Place-based emphasis where relevant; exotics where they serve the whole."
        }
      ]
    };
  </script>

  <!-- Navigation (FIXED) -->
  <nav class="backdrop-blur nav-border"
       style="background: var(--bg);">
    <div class="max-w-7xl mx-auto px-6 py-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
      <div class="flex items-center gap-3">
        <a href="#top" class="text-xs tracking-[0.18em] uppercase hover:opacity-70 transition-opacity">Ecological Registry</a>
      </div>

      <div class="flex flex-wrap items-center gap-6 md:gap-8 text-sm">
        <a href="#about" class="nav-link hover:opacity-60 transition-opacity">About</a>
        <a href="#how" class="nav-link hover:opacity-60 transition-opacity">How it works</a>
        <a href="#signals" class="nav-link hover:opacity-60 transition-opacity">Signals</a>
        <a href="#privacy" class="nav-link hover:opacity-60 transition-opacity">Privacy</a>
        <a href="#example" class="nav-link hover:opacity-60 transition-opacity">Example</a>
        <a href="#register" class="nav-link hover:opacity-60 transition-opacity">Register</a>
        <a href="#contact" class="nav-link hover:opacity-60 transition-opacity">Contact</a>

        <button id="themeToggle"
          class="text-xs tracking-[0.18em] uppercase hover:opacity-70 transition-opacity"
          style="border-left:1px solid var(--hair); padding-left:14px;">
          Dark
        </button>
      </div>
    </div>
  </nav>

  <main id="content">
    <!-- HERO -->
    <section id="top" class="screen">
      <div class="max-w-7xl mx-auto px-6 w-full">
        <div class="max-w-4xl">
          <div class="text-[11px] md:text-xs tracking-[0.22em] uppercase muted mb-4">
            A public registry for private land
          </div>

          <h1 class="hero-title font-serif text-3xl md:text-5xl lg:text-6xl leading-[0.98] tracking-tight">
            Recognise private gardens as ecological assets.
          </h1>

          <p class="text-base md:text-lg leading-relaxed mt-4 font-light muted max-w-3xl">
            Collectively, gardens form one of the largest untapped ecological assets in our cities. Ecological Registry provides the structure that allows private gardens to become measurable, trusted contributors to urban biodiversity.
          </p>

          <div class="mt-5 flex flex-col sm:flex-row gap-2.5">
            <a id="btnRegisterTop" href="#register"
               class="inline-block text-sm px-5 py-2.5 transition-opacity hover:opacity-70"
               style="background:var(--fg); color:var(--bg);">
              Register your garden
            </a>

            <a id="btnExample" href="#example"
               class="inline-block text-sm px-5 py-2.5 btn-border transition-all rounded-sm">
              See an example
            </a>

            <a id="btnYield" href="#system"
               class="inline-block text-sm px-5 py-2.5 transition-opacity hover:opacity-70 muted">
              How rewards could work →
            </a>
          </div>

          <div class="mt-5 text-sm muted flex flex-wrap gap-x-3 gap-y-2">
            <span>Measured</span><span aria-hidden="true">·</span>
            <span>Verified</span><span aria-hidden="true">·</span>
            <span>Privacy-first</span><span aria-hidden="true">·</span>
            <span>Baseline → change</span>
          </div>

          <div class="mt-6 divider-line"></div>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="screen">
      <div class="max-w-4xl mx-auto px-6 w-full">
        <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-4 leading-tight">
          A registry that makes ecological care legible.
        </h2>

        <div class="grid md:grid-cols-2 gap-5 md:gap-7">
          <div class="space-y-3 text-base leading-relaxed">
            <p>
              Most gardens are passive spaces. They are walked past, maintained out of habit, and rarely considered for their
              ecological potential.
            </p>
            <p>
              Modern life keeps many of us indoors — in offices, on screens, in cars. Our relationship with land has become distant.
              Gardens often remain decorative backdrops rather than living systems.
            </p>
          </div>

          <div class="space-y-3 text-base leading-relaxed">
            <p>
              Most urban gardens contribute very little measurable habitat, biodiversity, or ecological structure within fragmented
              urban ecosystems. This is not a failure of care — it is the outcome of patterns we inherited.
            </p>
            <p>
              Ecological Registry provides the structure to establish a baseline, then record change over time — so stewardship becomes
              visible, trusted, and able to compound across seasons.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- How it works -->
    <section id="how" class="screen">
      <div class="max-w-7xl mx-auto px-6 w-full">
        <div class="flex flex-col md:flex-row justify-between md:items-end gap-3 mb-5">
          <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl">How it works</h2>
          <p class="max-w-xl text-sm md:text-base leading-relaxed opacity-80">
            A light process designed for long horizons — gardens take years.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-3 md:gap-5">
          <article class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Step 1</div>
            <h3 class="font-medium mb-2">Register</h3>
            <p class="text-sm leading-relaxed opacity-70">
              Create a public profile and choose privacy settings. Add a name, a few images, and basic context.
            </p>
          </article>

          <article class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Step 2</div>
            <h3 class="font-medium mb-2">Baseline</h3>
            <p class="text-sm leading-relaxed opacity-70">
              Record what's there: structure, habitat features, soil cover, and water logic. Keep it practical.
            </p>
          </article>

          <article class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Step 3</div>
            <h3 class="font-medium mb-2">Improve</h3>
            <p class="text-sm leading-relaxed opacity-70">
              Add upgrades over time. Each update becomes a timestamped change-log entry with images and notes.
            </p>
          </article>
        </div>
      </div>
    </section>

    <!-- Signals -->
    <section id="signals" class="screen">
      <div class="max-w-4xl mx-auto px-6 w-full">
        <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-3 leading-tight">Signals (v1)</h2>

        <p class="text-sm md:text-base leading-relaxed mb-4">
          Measurement stays practical — the goal is not scientific theatre. A garden should know where it is, and what "better" means.
          These are intentionally simple signals that can be refined later.
        </p>

        <div id="signalsList" class="space-y-3 text-sm">
          <!-- Signals rendered from config -->
        </div>

        <p class="text-xs opacity-50 mt-4">
          Note: Signals evolve with the registry. Early versions stay simple; depth arrives through iteration and steward feedback.
        </p>
      </div>
    </section>

    <!-- Privacy -->
    <section id="privacy" class="screen">
      <div class="max-w-7xl mx-auto px-6 w-full">
        <div class="grid md:grid-cols-2 gap-5 md:gap-7 items-start">
          <div>
            <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-3">Privacy</h2>
            <div class="space-y-3 text-sm md:text-base leading-relaxed opacity-90">
              <p>
                The public page shows what's needed for meaning and trust: story, images, broad signals, and improvement.
                Address-level data and sensitive notes stay private unless explicitly enabled.
              </p>
              <p>
                The registry is designed so neighbours can understand the work — without exposing private detail.
              </p>
            </div>
          </div>

          <div class="space-y-3">
            <div class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
              <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Public</div>
              <div class="font-medium mb-2">Curated profile</div>
              <p class="text-sm leading-relaxed opacity-70">
                Photos, story, broad signals, and an improvement timeline.
              </p>
            </div>
            <div class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
              <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Private</div>
              <div class="font-medium mb-2">Sensitive layer</div>
              <p class="text-sm leading-relaxed opacity-70">
                Address, detailed notes, raw records, and anything the steward chooses not to publish.
              </p>
            </div>
            <div class="card-hover border border-subtle-strong bg-subtle p-4 rounded-sm">
              <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Control</div>
              <div class="font-medium mb-2">Owner governed</div>
              <p class="text-sm leading-relaxed opacity-70">
                The steward controls what appears publicly and what stays private.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Example -->
    <section id="example" class="screen">
      <div class="max-w-7xl mx-auto px-6 w-full">
        <div class="flex flex-col md:flex-row justify-between md:items-end gap-3 mb-5">
          <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl">Example garden</h2>
          <p class="max-w-xl text-sm md:text-base leading-relaxed opacity-80">
            A single page that shows the pattern: profile + baseline + changes over time.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-3 md:gap-5">
          <a href="#" id="exampleCard" class="card-hover block border border-subtle-strong bg-subtle p-5 rounded-sm">
            <div class="aspect-[4/3] bg-subtle border border-subtle mb-4 rounded-sm"></div>
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">Registered Garden</div>
            <div class="font-medium mb-2">REG-VIC-SH-001</div>
            <p class="text-sm leading-relaxed opacity-70">
              View a sample public profile page with baseline and improvement trail.
            </p>
          </a>

          <div class="card-hover border border-subtle-strong bg-subtle p-5 rounded-sm">
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">What you'll see</div>
            <div class="font-medium mb-2">Public page</div>
            <p class="text-sm leading-relaxed opacity-70">
              A calm profile: images, story, broad signals, and a change log that reads like a garden diary.
            </p>
          </div>

          <div class="card-hover border border-subtle-strong bg-subtle p-5 rounded-sm">
            <div class="text-xs uppercase tracking-wide opacity-60 mb-2">What stays private</div>
            <div class="font-medium mb-2">Sensitive details</div>
            <p class="text-sm leading-relaxed opacity-70">
              Address-level records and raw notes remain private unless explicitly published.
            </p>
          </div>
        </div>

        <div class="mt-4">
          <a href="#" id="btnExample2" class="inline-block text-sm btn-border px-6 py-2.5 transition-all rounded-sm">
            Open the example garden
          </a>
        </div>
      </div>
    </section>

    <!-- System -->
    <section id="system" class="screen">
      <div class="max-w-4xl mx-auto px-6 w-full">
        <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-3 leading-tight">The Registry Layer</h2>

        <div class="space-y-3 text-sm md:text-base leading-relaxed mb-4">
          <p>
            Individual gardens matter — but systemic change requires infrastructure around them.
            The registry layer creates the baseline record and change trail that incentives can later sit on top of.
          </p>
          <p>
            When gardens can be trusted, they can be supported: stewardship with proof, and restoration that can scale.
          </p>
        </div>

        <div class="space-y-3 text-sm">
          <div class="border-l-accent pl-5">
            <h3 class="font-medium mb-1.5">Baseline + change log</h3>
            <p class="leading-relaxed opacity-70">The minimum viable audit trail for ecological uplift.</p>
          </div>

          <div class="border-l-accent pl-5">
            <h3 class="font-medium mb-1.5">Optional verification</h3>
            <p class="leading-relaxed opacity-70">Lightweight pathways for partner review where needed.</p>
          </div>

          <div class="border-l-accent pl-5">
            <h3 class="font-medium mb-1.5">Yield (incentives)</h3>
            <p class="leading-relaxed opacity-70">Mechanisms that reward stewardship once outcomes are legible.</p>
          </div>
        </div>

        <div class="mt-4">
          <a href="#" id="btnYield2" class="inline-block text-sm btn-border px-6 py-2.5 transition-all rounded-sm">
            Explore Yield
          </a>
        </div>
      </div>
    </section>

    <!-- Register -->
    <section id="register" class="screen">
      <div class="max-w-4xl mx-auto px-6 w-full">
        <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-3 leading-tight">Register</h2>

        <p class="text-base md:text-lg leading-relaxed mb-5">
          Start light. Add truth. Improve over time. A garden becomes legible one entry at a time.
        </p>

        <div class="grid md:grid-cols-2 gap-5 md:gap-7">
          <div class="space-y-4 text-sm md:text-base leading-relaxed">
            <div class="text-sm uppercase tracking-wide opacity-60">Register a garden</div>
            <a href="#" id="btnRegister" class="inline-block btn-border px-6 py-2.5 text-sm transition-all rounded-sm">
              Open registration
            </a>

            <div class="pt-4">
              <div class="text-sm uppercase tracking-wide opacity-60 mb-2">Prefer a guided start?</div>
              <p class="opacity-80">
                A short call can define baseline signals, privacy settings, and the first improvement pathway.
              </p>
            </div>
          </div>

          <div class="space-y-4">
            <div class="text-sm uppercase tracking-wide opacity-60">Next steps</div>

            <a href="#example" class="card-hover block border border-subtle bg-subtle p-4 rounded-sm">
              <div class="font-medium mb-1">See the format</div>
              <div class="text-sm opacity-70">View an example registered garden page.</div>
            </a>

            <a href="#signals" class="card-hover block border border-subtle bg-subtle p-4 rounded-sm">
              <div class="font-medium mb-1">Understand the signals</div>
              <div class="text-sm opacity-70">What gets recorded and improved over time.</div>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="screen">
      <div class="max-w-4xl mx-auto px-6 w-full">
        <h2 class="font-serif text-2xl md:text-3xl lg:text-4xl mb-3 leading-tight">Contact</h2>

        <p class="text-base md:text-lg leading-relaxed mb-5">
          For registered gardens, neighbourhood pilots, or partner conversations — reach out.
        </p>

        <div class="grid md:grid-cols-2 gap-5 md:gap-7">
          <div class="space-y-4 text-sm md:text-base leading-relaxed">
            <div class="text-sm uppercase tracking-wide opacity-60">Email</div>
            <a href="#" id="btnEmail" class="inline-block btn-border px-6 py-2.5 text-sm transition-all rounded-sm">
              hello@gardenerandson.com.au
            </a>

            <div class="pt-4">
              <div class="text-sm uppercase tracking-wide opacity-60 mb-2">Studio</div>
              <p class="opacity-80">
                2 Churchill Street<br />
                Mont Albert 3127<br />
                Victoria, Australia
              </p>
            </div>
          </div>

          <div class="space-y-4">
            <div class="text-sm uppercase tracking-wide opacity-60">Related</div>

            <a href="#" id="btnStudio" class="card-hover block border border-subtle bg-subtle p-4 rounded-sm">
              <div class="font-medium mb-1">Back to Gardener &amp; Son</div>
              <div class="text-sm opacity-70">Studio page and system overview.</div>
            </a>

            <a href="#" id="btnRegister2" class="card-hover block border border-subtle bg-subtle p-4 rounded-sm">
              <div class="font-medium mb-1">Register a garden</div>
              <div class="text-sm opacity-70">Open the registration flow.</div>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Render signals from config
    const signalsList = document.getElementById('signalsList');
    const signals = window.REGSITE?.signals || [];

    signalsList.innerHTML = signals.map(signal => `
      <div class="border-l-accent pl-5">
        <h3 class="font-medium mb-1.5">${signal.title}</h3>
        <p class="leading-relaxed opacity-70">${signal.description}</p>
      </div>
    `).join('');

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        const href = this.getAttribute("href");
        const target = document.querySelector(href);
        if (!target) return;
        e.preventDefault();
        target.scrollIntoView({ behavior: "smooth", block: "start" });
      });
    });

    // Wire external links from CONFIG
    const cfg = window.REGSITE || {};
    const mailto = `mailto:${cfg.contactEmail || "hello@gardenerandson.com.au"}`;

    const setHref = (id, href) => {
      const el = document.getElementById(id);
      if (!el) return;
      el.setAttribute("href", href);
    };

    setHref("btnRegisterTop", cfg.registerUrl || "#register");
    setHref("btnRegister", cfg.registerUrl || "#register");
    setHref("btnRegister2", cfg.registerUrl || "#register");

    setHref("btnExample", cfg.exampleUrl || "#example");
    setHref("btnExample2", cfg.exampleUrl || "#example");
    setHref("exampleCard", cfg.exampleUrl || "#example");

    setHref("btnYield", cfg.yieldUrl || "#system");
    setHref("btnYield2", cfg.yieldUrl || "#system");

    setHref("btnEmail", mailto);
    setHref("btnStudio", cfg.studioUrl || "#top");

    // Theme
    const root = document.documentElement;
    const btn = document.getElementById("themeToggle");

    const applyTheme = (mode) => {
      const isDark = mode === "dark";
      root.classList.toggle("dark", isDark);
      if (btn) btn.textContent = isDark ? "Light" : "Dark";
      try { localStorage.setItem("reg_theme", mode); } catch(e){}
    };

    const stored = (() => { try { return localStorage.getItem("reg_theme"); } catch(e){ return null; }})();
    if (stored === "dark" || stored === "light") {
      applyTheme(stored);
    } else {
      const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      applyTheme(prefersDark ? "dark" : "light");
    }

    btn && btn.addEventListener("click", () => {
      const nowDark = root.classList.contains("dark");
      applyTheme(nowDark ? "light" : "dark");
    });

    // Track active section for nav highlighting
    const sections = document.querySelectorAll('.screen');
    const navLinks = document.querySelectorAll('nav a.nav-link');

    const observerOptions = {
      root: null,
      rootMargin: '-100px 0px -60% 0px', // Trigger when section is near top
      threshold: 0
    };

    const observerCallback = (entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');

          // Remove active class from all nav links
          navLinks.forEach(link => link.classList.remove('active'));

          // Add active class to current section's nav link
          const activeLink = document.querySelector(`nav a.nav-link[href="#${id}"]`);
          if (activeLink) {
            activeLink.classList.add('active');
          }
        }
      });
    };

    const observer = new IntersectionObserver(observerCallback, observerOptions);
    sections.forEach(section => observer.observe(section));

    // Set initial active state (first nav section is About)
    const firstNavLink = navLinks[0];
    if (firstNavLink) {
      firstNavLink.classList.add('active');
    }
  </script>
</body>
</html>
